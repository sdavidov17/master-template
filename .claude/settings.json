{
  "$schema": "https://claude.ai/code/settings-schema.json",
  "mcpServers": {
    "github": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-github"],
      "env": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "${GITHUB_TOKEN}"
      }
    },
    "supabase": {
      "command": "npx",
      "args": ["-y", "@supabase/mcp-server"],
      "env": {
        "SUPABASE_URL": "${SUPABASE_URL}",
        "SUPABASE_SERVICE_ROLE_KEY": "${SUPABASE_SERVICE_ROLE_KEY}"
      }
    },
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory"]
    },
    "postgres": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-postgres"],
      "env": {
        "POSTGRES_CONNECTION_STRING": "${DATABASE_URL}"
      }
    },
    "sqlite": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-sqlite"],
      "env": {
        "SQLITE_DB_PATH": "${SQLITE_DB_PATH}"
      }
    },
    "filesystem": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-filesystem", "${PROJECT_ROOT:-./}"]
    },
    "brave-search": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-brave-search"],
      "env": {
        "BRAVE_API_KEY": "${BRAVE_API_KEY}"
      }
    },
    "fetch": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-fetch"]
    },
    "puppeteer": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-puppeteer"]
    },
    "sentry": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-sentry"],
      "env": {
        "SENTRY_AUTH_TOKEN": "${SENTRY_AUTH_TOKEN}",
        "SENTRY_ORG": "${SENTRY_ORG}"
      }
    },
    "slack": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-slack"],
      "env": {
        "SLACK_BOT_TOKEN": "${SLACK_BOT_TOKEN}"
      }
    }
  },
  "disabledMcpServers": [
    "github",
    "supabase",
    "memory",
    "postgres",
    "sqlite",
    "filesystem",
    "brave-search",
    "fetch",
    "puppeteer",
    "sentry",
    "slack"
  ],
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "bash .claude/scripts/guards/block_dangerous_rm.sh \"$CLAUDE_BASH_COMMAND\""
          },
          {
            "type": "command",
            "command": "bash .claude/scripts/guards/block_force_push.sh \"$CLAUDE_BASH_COMMAND\""
          },
          {
            "type": "command",
            "command": "bash .claude/scripts/guards/warn_production.sh \"$CLAUDE_BASH_COMMAND\""
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "bash .claude/scripts/guards/protect_sensitive_files.sh \"$CLAUDE_FILE_PATH\""
          },
          {
            "type": "command",
            "command": "bash .claude/scripts/guards/warn_test_changes.sh \"$CLAUDE_FILE_PATH\""
          },
          {
            "type": "command",
            "command": "bash .claude/scripts/guards/protect_critical_files.sh \"$CLAUDE_FILE_PATH\""
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/hooks/post-tool-use.js \"$CLAUDE_FILE_PATH\" || true"
          },
          {
            "type": "command",
            "command": "echo \"$CLAUDE_FILE_CONTENT\" | bash .claude/scripts/guards/detect_hardcoded_secrets.sh || true"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "bash .claude/scripts/guards/check_tests_run.sh || true"
          },
          {
            "type": "command",
            "command": "bash .claude/scripts/post_commit_reminder.sh || true"
          }
        ]
      }
    ]
  },
  "permissions": {
    "allow": [
      "npm run build",
      "npm run build:*",
      "npm run test",
      "npm run test:*",
      "npm run lint",
      "npm run lint:*",
      "npm run format",
      "npm run dev",
      "npx prettier --write *",
      "npx tsc --noEmit",
      "pnpm run build",
      "pnpm run test",
      "pnpm run lint",
      "yarn build",
      "yarn test",
      "yarn lint",
      "bun run build",
      "bun run build:*",
      "bun run test",
      "bun run test:*",
      "bun run lint",
      "python -m pytest *",
      "python -m black *",
      "python -m ruff *",
      "go test *",
      "go build *",
      "go run *",
      "git status",
      "git diff *",
      "git log *",
      "git branch *",
      "git add *",
      "git commit *",
      "git push *",
      "git pull",
      "git fetch",
      "gh pr *",
      "gh issue *"
    ],
    "deny": []
  },
  "settings": {
    "model": "claude-sonnet-4-20250514",
    "customInstructions": "",
    "autoApprove": []
  }
}
